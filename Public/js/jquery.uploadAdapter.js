(function($){$.fn.uploadAdapter=function(opts){var defaults={baseUrl:$('#uploadAdapterbaseurl').val(),pluginType:null}defaults.swf=defaults.baseUrl+'/uploadify/uploadify.swf';var option=$.extend(defaults,opts);var _this=this;var checkSupport=function(){var input=document.createElement('input');var fileSupport=!!(window.File&&window.FileList);var xhr=new XMLHttpRequest();var fd=!!window.FormData;return'multiple'in input&&fileSupport&&'onprogress'in xhr&&'upload'in xhr&&fd?'html5':'flash'};var callUploader=function(pluginName,jsUrl,cssUrl){_this.each(function(){var athis=$(this);$.loadScript(jsUrl,'js',function(){$.loadScript(cssUrl,'css',function(){athis[pluginName](option)})})})}var pluginName,jsUrl,cssUrl;var setLoaderValue=function(type){if(type=='html5'){pluginName='Huploadify';jsUrl=option.baseUrl+'/Huploadify/jquery.Huploadify.min.js'}else{pluginName='uploadify';jsUrl=option.baseUrl+'/uploadify/jquery.uploadify.min.js'}cssUrl=option.baseUrl+'/uploadify/uploadify.css'}if(option.pluginType){setLoaderValue(option.pluginType)}else{setLoaderValue(checkSupport())}callUploader(pluginName,jsUrl,cssUrl)}})(jQuery)